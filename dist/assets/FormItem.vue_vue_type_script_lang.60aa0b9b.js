var Z=Object.defineProperty,ee=Object.defineProperties;var te=Object.getOwnPropertyDescriptors;var J=Object.getOwnPropertySymbols;var ne=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var $=(e,n,f)=>n in e?Z(e,n,{enumerable:!0,configurable:!0,writable:!0,value:f}):e[n]=f,m=(e,n)=>{for(var f in n||(n={}))ne.call(n,f)&&$(e,f,n[f]);if(J)for(var f of J(n))se.call(n,f)&&$(e,f,n[f]);return e},E=(e,n)=>ee(e,te(n));import{c as X,bu as Y,f as v,k as i,a as oe,ar as re,x as le,n as g,J as H,bB as ae,O as C,aI as F,bz as z,y as ce,E as ie,S as G,F as ue,a0 as de,B as fe,cV as me,cW as he,cX as pe}from"./index.c77972c6.js";/* empty css               *//* empty css               *//* empty css               */import{i as K}from"./componentMap.e56f5f78.js";const{t:B}=X();function U(e){return e.includes("Input")||e.includes("Complete")?B("common.inputText"):e.includes("Picker")||e.includes("Select")||e.includes("Cascader")||e.includes("Checkbox")||e.includes("Radio")||e.includes("Switch")?B("common.chooseText"):""}const be=["DatePicker","MonthPicker","WeekPicker","TimePicker"];function ge(){return[...be,"RangePicker"]}function ye(e,n,f){["DatePicker","MonthPicker","WeekPicker","TimePicker"].includes(n)?e.type=f?"string":"object":["RangePicker","Upload","CheckboxGroup","TimePicker"].includes(n)?e.type="array":["InputNumber"].includes(n)&&(e.type="number")}function Se(e,n){return e&&["Input","InputPassword","InputSearch","InputTextArea"].includes(e)&&n&&Y(n)?`${n}`:n}const Re=ge(),Me=["Input","InputPassword","InputSearch","InputTextArea"];function Pe(e,n){return v(()=>{const f=i(e),{labelCol:S={},wrapperCol:M={}}=f.itemProps||{},{labelWidth:T,disabledLabelWidth:h}=f,{labelWidth:x,labelCol:j,wrapperCol:D,layout:V}=i(n);if(!x&&!T&&!j||h)return S.style={textAlign:"left"},{labelCol:S,wrapperCol:M};let P=T||x;const L=m(m({},j),S),q=m(m({},D),M);return P&&(P=Y(P)?`${P}px`:P),{labelCol:m({style:{width:P}},L),wrapperCol:m({style:{width:V==="vertical"?"100%":`calc(100% - ${P})`}},q)}})}function _(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!ae(e)}var Te=oe({name:"BasicFormItem",inheritAttrs:!1,props:{schema:{type:Object,default:()=>({})},formProps:{type:Object,default:()=>({})},allDefaultValues:{type:Object,default:()=>({})},formModel:{type:Object,default:()=>({})},setFormModel:{type:Function,default:null},tableAction:{type:Object},formActionType:{type:Object},isAdvanced:{type:Boolean}},setup(e,{slots:n}){const{t:f}=X(),{schema:S,formProps:M}=re(e),T=Pe(S,M),h=v(()=>{const{allDefaultValues:s,formModel:t,schema:r}=e,{mergeDynamicData:a}=e.formProps;return{field:r.field,model:t,values:m(m(m({},a),s),t),schema:r}}),x=v(()=>{var l;const{schema:s,tableAction:t,formModel:r,formActionType:a}=e;let{componentProps:o={}}=s;return C(o)&&(o=(l=o({schema:s,tableAction:t,formModel:r,formActionType:a}))!=null?l:{}),s.component==="Divider"&&(o=Object.assign({type:"horizontal"},o,{orientation:"left",plain:!0})),o}),j=v(()=>{const{disabled:s}=e.formProps,{dynamicDisabled:t}=e.schema,{disabled:r=!1}=i(x);let a=!!s||r;return F(t)&&(a=t),C(t)&&(a=t(i(h))),a});function D(){const{show:s,ifShow:t}=e.schema,{showAdvancedButton:r}=e.formProps,a=r&&F(e.isAdvanced)?e.isAdvanced:!0;let o=!0,l=!0;return F(s)&&(o=s),F(t)&&(l=t),C(s)&&(o=s(i(h))),C(t)&&(l=t(i(h))),o=o&&a,{isShow:o,isIfShow:l}}function V(){var R;const{rules:s=[],component:t,rulesMessageJoinLabel:r,label:a,dynamicRules:o,required:l}=e.schema;if(C(o))return o(i(h));let c=de(s);const{rulesMessageJoinLabel:w}=e.formProps,I=Reflect.has(e.schema,"rulesMessageJoinLabel")?r:w,p=U(t)+`${I?a:""}`;function k(d,u){const y=d.message||p;return u===void 0||he(u)||Array.isArray(u)&&u.length===0||typeof u=="string"&&u.trim()===""||typeof u=="object"&&Reflect.has(u,"checked")&&Reflect.has(u,"halfChecked")&&Array.isArray(u.checked)&&Array.isArray(u.halfChecked)&&u.checked.length===0&&u.halfChecked.length===0?Promise.reject(y):Promise.resolve()}const b=C(l)?l(i(h)):l;b&&(!c||c.length===0?c=[{required:b,validator:k}]:c.findIndex(u=>Reflect.has(u,"required"))===-1&&c.push({required:b,validator:k}));const O=c.findIndex(d=>Reflect.has(d,"required")&&!Reflect.has(d,"validator"));if(O!==-1){const d=c[O],{isShow:u}=D();if(u||(d.required=!1),t){Reflect.has(d,"type")||(d.type=t==="InputNumber"?"number":"string"),d.message=d.message||p,(t.includes("Input")||t.includes("Textarea"))&&(d.whitespace=!0);const y=(R=i(x))==null?void 0:R.valueFormat;ye(d,t,y)}}const A=c.findIndex(d=>d.max);return A!==-1&&!c[A].validator&&(c[A].message=c[A].message||f("component.form.maxTip",[c[A].max])),c}function P(){var u;const{renderComponentContent:s,component:t,field:r,changeEvent:a="change",valueField:o}=e.schema,l=t&&["Switch","Checkbox"].includes(t),c=`on${pe(a)}`,w={[c]:(...y)=>{const[W]=y;b[c]&&b[c](...y);const N=W?W.target:null,Q=N?l?N.checked:N.value:W;e.setFormModel(r,Q,e.schema)}},I=K.get(t),{autoSetPlaceHolder:p,size:k}=e.formProps,b=E(m({allowClear:!0,getPopupContainer:y=>y.parentNode,size:k},i(x)),{disabled:i(j)});!b.disabled&&p&&t!=="RangePicker"&&t&&(b.placeholder=((u=i(x))==null?void 0:u.placeholder)||U(t)),b.codeField=r,b.formValues=i(h);const A={[o||(l?"checked":"value")]:e.formModel[r]},R=m(m(m({},b),w),A);if(!s)return g(I,R,null);const d=C(s)?m({},s(i(h))):{default:()=>s};return g(I,R,_(d)?d:{default:()=>[d]})}function L(){const{label:s,helpMessage:t,helpComponentProps:r,subLabel:a}=e.schema,o=a?g("span",null,[s,fe(" "),g("span",{class:"text-secondary"},[a])]):s,l=C(t)?t(i(h)):t;return!l||Array.isArray(l)&&l.length===0?o:g("span",null,[o,g(me,G({placement:"top",class:"mx-1",text:l},r),null)])}function q(){const{itemProps:s,slot:t,render:r,field:a,suffix:o,component:l}=e.schema,{labelCol:c,wrapperCol:w}=i(T),{colon:I}=e.formProps;if(l==="Divider"){let p;return g(H,{span:24},{default:()=>[g(ie,i(x),_(p=L())?p:{default:()=>[p]})]})}else{const p=()=>t?z(n,t,i(h)):r?r(i(h)):P(),k=!!o,b=C(o)?o(i(h)):o;return g(ue.Item,G({name:a,colon:I,class:{"suffix-item":k}},s,{label:L(),rules:V(),labelCol:c,wrapperCol:w}),{default:()=>[g("div",{style:"display:flex"},[g("div",{style:"flex:1;"},[p()]),k&&g("span",{class:"suffix"},[b])])]})}}return()=>{let s;const{colProps:t={},colSlot:r,renderColContent:a,component:o}=e.schema;if(!K.has(o))return null;const{baseColProps:l={}}=e.formProps,c=m(m({},l),t),{isIfShow:w,isShow:I}=D(),p=i(h);return w&&le(g(H,c,_(s=(()=>r?z(n,r,p):a?a(p):q())())?s:{default:()=>[s]}),[[ce,I]])}}});export{Te as _,Re as a,Me as d,Se as h};
